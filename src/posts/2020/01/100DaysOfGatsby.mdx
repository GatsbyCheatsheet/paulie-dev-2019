---
title: 100DaysOfGatsby
tags: ["gatsbyJs"]
date: 2020-01-01
featuredImage: 100DaysOfGatsby.jpg
---

## [Day 18](#day-18)

##### Jan 18 2020

I did a bit of work this morning on recursive functions to make the navigation in `docz` work for me. Luckily since `docz` is also a Gatsby theme i'm able to tap in to component shadowing. I started by looking at `gatsby-theme-docz/src/components/Sidebar` and investigated the `menu` object.

This, as it stands doesn't have a way to group by submenu but the theme does allow you to add an additional fields to frontmatter.

This is quite key given i need a way to determine if a file is part of a menu as well as part of a submenu.

I've since added a sumbmenu property to the `.mdx` files that i will use to "group by" and have set to work on altering the menu object created by `docz` core and recursively looping over any object that contains a submenu.

Now i have an object that i can use to drive the UI.

I've also been working on another blog post explaining recursive functions and will continue to update it documenting the problem i'm facing and how i intend to solve the `docz` theme submenu problem.

## [Day 17](#day-17)

##### Jan 17 2020

This morning i was attempting to work on a recursive submenu solution for the navigation in the `docz` site used by [gatsby-mdx-embed](https://gatsby-mdx-embed.netlify.com/) and as i worked through a solution i thought about how this might make a good blog post.

I then thought, if i start to write the post in this blog the next time i commit and publish that post will also get published.

This blog uses my theme [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) which currently has no way to set a post as draft which would exclude it from being published.

I then worked on my theme and have included a new property in the frontmatter called `status`. If `status` is set to _draft_ the post won't be displayed and none of the charts will attempt to reference it as a data source, thus not skewing your metrics üòé

That issue was raised on GitHub [#26](https://github.com/PaulieScanlon/gatsby-theme-gatstats/issues/26) and now felt like a good time to address it.

I've had another issue raised today too, this time with [gatsby-remark-sticky-table](https://github.com/PaulieScanlon/gatsby-remark-sticky-table) A user wanted to put images in a table cell.

There's probably something funky going on with the way i'm parsing the node to the new markup so i suggested this [solution](https://github.com/PaulieScanlon/gatsby-remark-sticky-table/issues/2) and might investigate this another time.

Right... back to the recursive submenu problem!

## [Day 16](#day-16)

##### Jan 16 2020

This morning i was having a google around and out the corner of my eye i saw a Pinterest logo... _ooh_ i thought, i wonder if Pinterest have embed-able widgets?

They do! so that was me for the next few hours!

[gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) now has three new components for Pinterest.

The standard `<Pin />` where you can embed an image from Pinterest, a `<PinterestFollowButton />` and a `<PinterestBoard />` with an optional prop so you can create a board from a user or a board from a board, if that makes sense.

The inject script works very similarly to Twitter, Instagram and Flickr but i did need to do a little digging into the window object to find the `build()` function. This needs to be called on route change so that any components on the page will execute and display as expected.

This evening i'll be looking at how to make a change to the `docz` theme so i can have nested menus. I have a feeling my old enemy `array.reduce()` may be required and it doesn't matter how many times i read or write an `array.reduce()` i always struggle!

## [Day 15](#day-15)

##### Jan 15 2020

I spent some of the morning updating prop names and continued to work on two new components, `<TwitterTimeline />` and `<TwitterList />` and i really like the Twitter method for handling embeds!

The method i've used to inject the Twitter embed script remains in tact and all the other Twitter embeds work without any additional _injecting_, which leaves me time to just develop the components and ponder about what to name the props.

At this point i was really regretting not implementing TypeScript üòû. I use TypeScript for my day job and in my bigger projects like [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) and developing without it feels like being nude and leaving the house.

As development continued i'd been wondering if [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) was going to need TypeScript because `PropTypes` kinda has my back but i'm now feeling really un-easy with working towards a stable release without it so implementing it now is an absolute must.

This evening i've refactored everything and [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) is now TypeScript enabled üéâü•≥.

It feels like a massive relief to know that's sorted and it wasn't too much of pain to setup. `docz` did give me a few headaches with it not generating the prop table from the TypeScript interface... until i discovered that i needed to set `typescript: true` in the `doczrc.js`

With TypeScript now in place i'm more comfortable with continuing to develop components and perhaps `1.0.0` will happen sooner than expected.

## [Day 14](#day-14)

##### Jan 14 2020

Last night i started to implement Twitter buttons and hit a naming issue. I'd previously named the components after the provider they represent. In the case of a Tweet this is fine because a Tweet is a unique _thing_ but, what do i do with a hashtag button?

Twitter isn't the only provider tha uses the hashtag paradigm and so i've had to start thinking about prefixing names to allow for this plugin to scale. Maybe at some point i'll be able to introduce an Instagram hashtag button. ü§∑‚Äç‚ôÇÔ∏è

This led me on to the next problem. Props!

To give some context. I build commercial React Component Libraries for companies that make bazillions and these Component Libraries are typically used by lots of engineers on various projects so i'm familiar with the trouble with naming things.

I have learnt that keeping a consistent api for prop names is key.

For instance if you have a number of components that, let's say accept some kind of render prop for a _heading_, this prop across the entire library should always be called _heading_. It makes no sense if in a Card component you name it _CardHeading_ and then in a Modal name it _Header_.

I was trying with [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) to keep a consistent `id` prop across all components but i've now hit a point where `id` just doesn't cut the mustard. üå≠

On some components like YouTube the `id` is the video id and that's how YouTube refer to it but, in a Tweet for instance i need the prop to be less ambiguous.

I had some interesting Tweets back and forth with [@AskGatsbyJS](https://twitter.com/AskGatsbyJS) and [John Otander](https://twitter.com/4lpine) and the general consensus was in Open Source Libraries it pays to be clear and it doesn't matter that names or prop names are long. I think there's a post or Tweet out there by Dan Abramov about how the function names at Facebook are really long, but the upside is it's clear what they do.

<Tweet id="4lpine/status/1216821698600681472" />

I've tried to keep some consistency and the `id` paradigm is still in use but now it's more explicit `youTubeId`.

For components that require more than an `id`, Spotify and Gist for instance where the prop includes a word `tracks` or `album` AND an `id` i've gone with `...Link`. I thought about using `URL` in the prop name but the prop doesn't contain `http` etc so it's not really a URL.

Interestingly though when i have `username` as a prop i don't feel i need to change this to, e.g `twitterUsername`, same thing with the `hashtag` prop. If you're using a component that has the provider in the name like `<TwitterHashtagButton />` i hope it's clear that the `hashtag` prop refers to a Twitter hashtag... naming things is hard üò©

A note on [sem-ver](https://semver.org/spec/v2.0.0.html). Strictly speaking these are breaking changes but i feel i can justify not bumping the plugin to a major release version of `1.0.0` because in my mind when a library is only at `0.x.x` to start with it's still a pre-release... even though i have already released it. ü§Ø

I'm not sure if this is a bad thing to do but i suspect i'm going to encounter a lot more of these kinds of naming issues before i'm happy to release a stable `1.0.0`.

I have started a [CHANGELOG](https://github.com/PaulieScanlon/gatsby-mdx-embed/blob/master/%40pauliescanlon/gatsby-mdx-embed/CHANGELOG.md) which should help you fix any issues, and of course the [docz](https://gatsby-mdx-embed.netlify.com/) will always reflect the actual state of the library.

I hope this change hasn't or won't cause anyone any serious headaches but if you are having problems feel free to Tweet me [@PaulieScanlon](https://twitter.com/PaulieScanlon)

This morning and this evening will mostly be taken up by combing over the docs and i'll be thinking hard about sensible names for both components and props.

TTFN!

## [Day 13](#day-13)

##### Jan 13 2020

This morning i continued to work on the _Wikipedia_ component and switched to using the wikipedia [rest_v1](https://en.wikipedia.org/api/rest_v1/) api

I had a little trouble with the response, i was parsing `response.json()` but i needed `response.text()`

This can now be injected into the `srcDoc` of an `iframe` which retains all the wikipedia styles but has created a new problem.

The `iframe` now needs some dimensions. By default i'm setting the width as 100% and i'm allowing for a height prop which means control of the height is handed over to whoever is using this component in their `.mdx`

I think this will be enough for now and should i get any issues on [GitHub](https://github.com/PaulieScanlon/gatsby-mdx-embed/issues) i'll deal with them when they arise.

oh, and here's a [demo](https://gatsby-mdx-embed.netlify.com/src-components-wikipedia) of the finished component.

## [Day 12](#day-12)

##### Jan 12 2020

Today i continued to work on the _Wikipedia_ component and have a new method in place for querying the Wiki api. The new method uses the fetch api which has cleaned things up a lot and means there's less JavaScript being injected into the page but the thing that's stumped me now is that the response i'm getting using this approach no longer returns a stylesheet.

I can render the page data but the content picks up the styles from the `docz` site rather than the usual Times New Roman style from Wikipedia that we are familiar with.

There are alternative methods documented in the Wikipedia api for fetching the css but i'm having trouble getting both the stylesheet and the data in the same response. I'll just have to keep digging!

The other issue i encountered was that the api response returns _All_ links as relative. For instance for my test page i'm querying "The_Jimi_Hendrix_Experience" and the `href`'s that are returned look like this

```html
wiki/The_Jimi_Hendrix_Experience
```

when in fact they need to be prefixed with `https://en.wikipedia.org/`

```html
https://en.wikipedia.org/wiki/The_Jimi_Hendrix_Experience
```

using a regex pattern i'm replacing everything that has `wiki` in the href with the url.

I've never really understood regex but i did spend some time reading, watching and learning about the bits i needed.

Here's the final regex pattern `/<a href="\/w/g` which when used in the response looks like this

```js
text["*"].replace(
  /<a href="\/w/g,
  '<a target="_blank" href="//en.wikipedia.org/w'
)
```

I added the `target="_blank"` as it feels like a better option for users, perhaps i'll turn this into a prop but it works like a charm so i'm happy to move forward.

## [Day 11](#day-11)

##### Jan 11 2020

It's Saturday and i didn't have a lot of time today. I did continue working on the Dropbox _Chooser_ component but i think i need to shelve development on this for the time being.

After making good progress i noticed that in order to get it hooked up i'd need to inject the script for each and every _Chooser_ button.

The repercussions are that this could really affect page load speed and that really goes against what i'm trying to achieve with this plugin

I've pushed a branch so i can keep my work but for now i'm going to move on to something else.

I've since gone back to my list of oEmbed providers and have decided to focus on a _Wikipedia_ component. It feels like it could be useful and the [api](https://en.wikipedia.org/w/api.php) looks to be well documented.

Upon initial inspection i think the best course of action is to `fetch` the "page" from the Wiki api, then render the response using `dangerouslySetInnerHTML`. I'll see how it goes and no doubt report back tomorrow.

## [Day 10](#day-10)

##### Jan 10 2020

Last night i decided to design a logo for [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) i was hoping it would be like the Fight Club logo in a bar of soap but it didn't quite work out that way... i was a designer a long time ago but i think i've now just run out of talent. ü§∑‚Äç‚ôÇÔ∏è

Another early start again this morning and i started to think about how users might use this plugin and it's not always clear what i'm referring to as an `id` in the props. As of this morning i've created a [Help](https://gatsby-mdx-embed.netlify.com/src-pages-help) page which documents how to extract the `id` the component needs from the providers embed code or URL.

This evening i'm planning on adding Dropbox [chooser](https://www.dropbox.com/developers/chooser) to the list of components. I don't even use Dropbox but it has an embed-able script tag so it belongs in [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed)

## [Day 9](#day-9)

##### Jan 9 2020

I had a productive morning this morning and have added _Twitch_ to the list of components [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) supports.

While i was digging around the Twitch embed code i noticed the **skip to** option which allows you to embed a video and start it a certain point. This seems like a pretty useful thing to include so i added it as an optional prop along with auto play.

The way Twitch handles the time code is by having the following parameters as part of the URL.

```js
&t=0h21m14s
```

`t` is the time parameter which accepts a numerical value followed by the time digit `h` for hours, `m` for minutes and `s` for seconds. I've exposed a `skipTo` prop on the Twitch component so you can pass through a time-code.

```js
skipTo={{ h: 0, m: 21, s: 14 }}
```

I then thought i'd add this to the _YouTube_ component, but YouTube do the time-code a different way.

The URL parameter looks like this

```js
&start=1274
```

After doing a bit of maths i realized the time-code is the total minutes from the start of the video. I wanted to keep the props the same as i've done with Twitch so i needed to calculate the total time before i pass it on to the URL.

```js
const { h, m, s } = skipTo

const tH = h * 60
const tM = m * 60

const startTime = tH + tM + s
// startTime = 1274
```

First i de-structure the `h`, `m` and `s` from the `skipTo` object then multiply `h` by 60 and also `m` by 60, you don't need to do it for seconds as the `start` time is in minutes.

Then the last step is to add these all together to create something the YouTube URL understands.

I've also added the same prop to Vimeo, and luckily it handles the time-code in a very similar way to Twitch so not much work needed to be done on that.

This is now available in `v0.0.6` of [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed)

## [Day 8](#day-8)

##### Jan 8 2020

Last night i carried on working on [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed), made some tweaks to the `docz` theme and found a list of "providers" that are supported by oEmbed.

There where two that caught my eye, _SoundCloud_ and _Gist_. SoundCloud was pretty straight forward as it's a very similar method to how _YouTube_ and _Vimeo_ so that was no problem.

This morning i moved on to Gists.

I Googled around to see if there were any existing React repos and found these two... so thanks [Christian Kornd√∂rfer](https://github.com/schnubor) and [Miroslav Saraƒçeviƒá](https://github.com/msaracevic)

The main bit that i didn't initially understand was how to handle the `JSON` callback.

If we start with a typical Gist URL and run it, you'll hit the [https://gist.github.com/](https://gist.github.com/)

```js
https://gist.github.com/PaulieScanlon/ca0cc9239176066492cb2aba435edbf7
```

To provide a callback we can add on `gist_callback` i Googled around for how to add the callback for ages and found no official docs, just examples of how others have done this.

```js
?gist_callback_ca0cc9239176066492cb2aba435edbf7
```

This is now the complete URL.

```js
https://gist.github.com/PaulieScanlon/ca0cc9239176066492cb2aba435edbf7?callback=gist_callback_ca0cc9239176066492cb2aba435edbf7
```

The last step was to inject a `<script>` tag with the URL in a `useEffect` life-cycle method, create a function on the window object called `gist_callback_ca0cc9239176066492cb2aba435edbf7` then investigate the response.

The response comes back with a `div` object which contains all the HTML for the Gist which can be handled by `dangerouslySetInnerHTML`

```js
<div dangerouslySetInnerHTML={{ __html: response.div }} />
```

...and a `stylesheet` object which in turn needs to be injected into the page in a `<link>` tag.

With both of those things done Gists are now embed-able!

I need to do a bit more work on handling errors but i've bundled it up and Gists are now part of `v0.0.4`

Happy Embedding! üßº

## [Day 7](#day-7)

##### Jan 7 2020

Yesterday was a pretty good day, i was relieved to finally get `docz` setup the way i wanted. I also launched a very early version of [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed). A fellow Gatsby enthusiast who i met at Gatsby Days London [Scott Spence](https://twitter.com/spences10) was keen to try it out... so, here ya go Scott!

<Tweet id="PaulieScanlon/status/1214241819397103618" />

This evening i'll mostly be focussing on documenting and testing the props for each component and perhaps if there's time i'll investigate what other providers i can include. [dev.to](https://dev.to/) would be sweet but i had a quick google and there's an open issue on [GitHub](https://github.com/thepracticaldev/dev.to/issues/1445) regarding this so i don't know if it's possible yet... stay tuned üì∫

## [Day 6](#day-6)

##### Jan 6 2020

Back to my day job today so i got up early and cracked on with the `docz.site`... and pleased to report i got the `<Props>` component working.

I was on the right track with what i thought the problem was and `docz` can be configured to source files from outside the root directory but this hasn't been documented anywhere.

The problem was twofold.

1. What did node think the root was and what is the correct path to pass to `docz`
2. How the WT Flip do you pass a path to `docz`

The way to do point 2 is to add `docgenConfig.searchPath` to `doczrc.js` which tells `docz` where to look for component props. You won't find this in their docs but i did find it amongst the [examples](https://github.com/doczjs/docz/blob/master/examples/monorepo-separate-docs/packages/docs/doczrc.js)

```js
// doczrc.js
export default {
  docgenConfig: {
    searchPath: directoryPath,
  },
}
```

and `directoryPath` is as follows;

```js
const directoryPath = path.join(
  process.cwd(),
  "../@pauliescanlon/gatsby-mdx-embed/src/components"
)
```

First i'm using `path.join` to make sure i don't end up with un-wanted `/`'s, then i'm using `process.cwd` which is the node.js method for working out the **C**urrent **W**orking **D**irectory then finally i go up a level `"../"` and into the yarn workspace where i'm writing my `MdxComponents`

This now means from the `.mdx` file where i'm writing the documentation about the component i can also have a nicely formatted prop table which are the real props defined by `propTypes` in the component file.

You can see the example for the CodePen component [here](https://gatsby-mdx-embed.netlify.com/src-components-code-pen)

Later tonight or early tomorrow i'd like to tweak the `docz` theme styles a bit then finally i can crack on with developing the `MdxComponents`

Oh and dark mode now works! üéâ

## [Day 5](#day-5)

##### Jan 5 2020

Today i decided to focus on the documentation site as i need a `playground` setup so i can test props for each of the `MdxEmbed` components.

Usually in my professional life i'd use [Storybook](https://storybook.js.org/) but since part of [#100DaysOfGatsby](https://twitter.com/hashtag/100DaysOfGatsby) is to learn new things i've gone for using [docz.site](https://www.docz.site/)

It was a bit tricky to setup as i wanted to use [gatsby-theme-docz](https://github.com/doczjs/docz/tree/master/core/gatsby-theme-docz) and i found the documentation regarding setup a bit confusing.

None the less it's all looking pretty good now. I might have found a bug with how the plugin options are passed or perhaps in some cases they have to be set in the `doczrc.js` file... who knows, maybe i'll have to live without dark mode on ths one!

The problem i'm currently experiencing is with the `<Props>` component which is one of the [built-in-components](https://www.docz.site/docs/built-in-components) which can create prop tables for my components. What's not initially made clear is that it'll only work if the component in question is local to the `.mdx`. For example `docz` will generate a prop table for `<MyComponent>` it it's in the same **things** folder as `MyMdx.mdx`

```
 - things
    MyComponent.js
    MyMdx.mdx

```

... But it wont work if i move `<MyComponent>` to somewhere else, for example...

```
- components
  MyComponent.js

- pages
  MyMdx.mdx

```

If you want to be able to source files from somewhere else you have to set the `src` value in `doczrc.js`

```js
export default {
  ...
  src: './components',
}
```

But my docs site and my MdxEmbed project are two different repos linked together by yarn workspaces so i think i need to tell docz to jump up a level to find my components.

```js
export default {
  ...
  src: '../@pauliescanlon/gatsby-mdx-embed/src/components',
}
```

Which causes GraphQL to error, presumably because it can't find what it needs?

I'm currently trying to work out where node thinks the root is and from there i need to refresh my memory about `path.resolve` and `process.cwd` but that sounds like a job for tomorrow!

## [Day 4](#day-4)

##### Jan 4 2020

Yesterday i spent the morning getting lost in a `docs` rabbit hole. I tried numerous documentation themes but all were tripping me up one way or another so i decided to shelve the docs part of [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) and just get something looking half decent... which led me down another rabbit hole. I had real trouble getting theme-ui and typography treatments to works. I also discovered that behind theme-ui typography is Kyle Mathews who has been creating a ton of them. I kept having the same issue though and that was the body font wasn't being set so i resorted to using emotion core global and css to just set it... again i'll come back to this.

What i was able to do on [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) though was to understand how to create a method for the provider so that once the plugin is installed that's all a user would have to do. It's similar to how `gatsby-plugin-theme-ui` works by using `gatsby-browser` and `gatsby-ssr` and using the `wrapRootElement` method to inject the MdxProvider.

This i discovered needs to be done in both files and in different ways. in `gatsby-browser` es6 imports work in `gatsby-ssr` you have to use require and node modules exports.

..both are required so that in dev and prod the MdxEmbedProvider wraps the root element. With this now working i'm almost ready for an early release.

...

## [Day 3](#day-3)

##### Jan 3 2020

This post is starting to feel like an agile standup so perhaps i'll treat it like one.

###### Yesterday

After writing yesterdays blog post i had a think about how i was gonna handle the headings with nested `<a>` styling in [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) which was actually pretty easy. I'm using [theme-ui](https://theme-ui.com/) for everything so a little update to my headings object to style the child `<a>` was all that was needed.

```js
const headings = {
  ...
  a: {
    fontSize: 'inherit',
    fontWeight: 'inherit',
    lineHeight: 'inherit',
    color: 'inherit'
  }
}
```

Next i looked at how these `#` anchors should work. Typically in a site the browser jumps to where the `#` starts when clicked and if a link is shared with a `#` as part of the url when the page loads it'll move the page so the `#` link is at the top.

For this to work in my theme i needed to look at the `gatsby-browser` api. There's two methods that were required to make this to work.

- [onRouteUpdate](https://www.gatsbyjs.org/docs/browser-apis/#onRouteUpdate) which is called when a user changes routes, and also called when an `<a>` is clicked (if it has a `#`)
- [shouldUpdateScroll](https://www.gatsbyjs.org/docs/browser-apis/#shouldUpdateScroll) which allows us to influence the scroll position of the browser on load and also it would seem between route changes.

The main guts of this functionality is wrapped up in a little function i created in `gatsby-browser` which is called by both of the above methods.

```js
const anchorScroll = location => {
  if (location && location.hash) {
    const item = document.querySelectorAll(`a[href^="${location.hash}"]`)[0]
      .offsetTop
    const mainNavHeight = document.querySelector(`header`).offsetHeight
    setTimeout(() => {
      window.scrollTo({
        top: item - mainNavHeight,
        behavior: "smooth",
      })
    }, 50)
  }
}
```

In short all this is doing is finding the `<a>` element that contains the `#` which is found from the url / `location.hash` then scrolls to it. There's an offset in there because [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) has a position fixed header so i needed to calculate the top position minus the height of the header so the selected `#` isn't under the header when the browser scrolls to it.

This all works well but i'm a little worried about my choice to use the native `window.scrollTo` method with `behavior: "smooth"` as some older browsers don't support this so if you're using IE 11 (ü§¢) can you let me know if it still works as intended?

I also had a little bit of twitter activity yesterday from a new user of [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) who tweeted to ask me how to do something. He said he didn't want to raise as issue as he thought it was more him not knowing how to do it rather than it being a bug. My reply "was go ahead, raise an issue" Reason being is that if he's had problems with this particular "thing" then perhaps i should explain it better in the README so others don't have the same question.

I'm pretty new to open source and [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats) is the first real project i've had where users are getting in touch and / or rasing issues on GitHub. I think it's fantastic to be honest as it's quite difficult to know how your project will be used and whilst i tried to think of everything i know i've missed things so having other users point this out and let me know means i get to change and improve the project ... it's a win, win!

###### Today

Today i really want to focus on [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) and get this converted to TypeScript and perhaps get Storybook setup.. but i do like the idea of using a Gatsby project to use as a documentation site so i'll probably have google around and see what's out there.

I'm also thinking in the background about the subjects i'm covering on this "standup" style post and which ones should be promoted to their own blog posts. The `<a>` `#` thing i did yesterday could be a good one to write up but i'm not sure i'll have time. For now at least my main focus is on getting [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) stable and released.

## [Day 2](#day-2)

##### Jan 2 2020

Started this morning by fixing a bug with [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats). Part of the [dashboard](https://gatsby-theme-gatstats.netlify.com/) has a **Posts** chart displaying information gathered from the previous year and current years posts. I wasn't correctly checking that the chart would render correctly if there were no posts for the current year.

I've also noticed another bug which is the chart max range needs to be calculated from grabbing the highest count value from both of the year data arrays. I was previously only checking the current year data and creating the range from the hightest count value in that year but it's quite possible that the previous year will have a higher count meaning the line chart will get cut off.

I also need to investigate anchor tags in the theme so that they don't always take on the styling for `<a>` if nested within an `<h1>` This will come in handy should i want to add anchor tags to each heading from this 100DaysOfGatsby post.

## [Day 1](#day-1)

##### Jan 1 2020

Today is the first day of [#100DaysOfGatsby](https://twitter.com/hashtag/100DaysOfGatsby) and since i already have a blog in place i think i'm gonna just continue working on my various Gatsby projects and try to write a bit each day and then see where i'm at in 100 days.

I currently have a number of Gatsby plugin projects all on npm but all in various states of completeness, these are:

- [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats)
- [gatsby-remark-sticky-table](https://github.com/PaulieScanlon/gatsby-remark-sticky-table)
- [gatsby-remark-grid-system](https://github.com/PaulieScanlon/gatsby-remark-grid-system)
- [gatsby-mdx-routes](https://github.com/PaulieScanlon/gatsby-mdx-routes)
- [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed)

Today i've pushed a fairly stable commit to [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) which i think pretty much solves the twitter, instagram and flickr embed problem. I'm not gonna release this to npm just yet as i've done with previous plugins because i'd like to get this properly tested and converted to TypeScript first.

[gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) is first and foremost an `MdxProvider` and when used in a Gatsby project along side `.mdx` it'll allow for media embed codes to be used without import by using the `MdxProvider` and it's `component` prop.

So far so good and i have the first 8 components in and working, although the instagram one seems a little flakey on iOS.

Lessons learned today are similar to issues i've experienced before regarding `gatsby-ssr` and `gatsby-browser`. Or more specifically the problems when attempting to use both together to accomplish similar things.

ie. if `gatsby-browser` relies on something that `gatsby-ssr` is gonna do which might not run synchronously. I made a change and it was worth the effort now `gatsby-browser` does all the heavy lifting things are working much better.

In the case of [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) it was because i was using `gatsby-ssr` to inject the relevant provider scripts into the `<head>` and then using `gatsby-browser` to invoke them. This wasn't really working so making the `<script>` tags and appending them to `<head>` AND then invoking them from `gatsby-browser` proved more solid.

I'd really like to solve the instagram problem before moving on much further but getting the project converted to Typescript and then installing [Storybook](https://storybook.js.org/) sounds like it's gonna be way more fun.

I plan to open up and document a load of props to make each component more useful, adding widths to videos and or aspect ratios etc would be really cool. I haven't set up a TypeScript / Storybook repo for a while so this should be fun!

Once i'm happy [gatsby-mdx-embed](https://github.com/PaulieScanlon/gatsby-mdx-embed) is pretty solid i'm gonna switch out the temporary `Tweet` and `YouTube` components i hacked together in my theme [gatsby-theme-gatstats](https://github.com/PaulieScanlon/gatsby-theme-gatstats)

I'm gonna use this post as a kind of journal and update each day with things i'm working on of things i'm thinking about and would like to create more in depth posts for topics that warrant further explanation.
